# 木灵 (Mu Ling) 暗色模式视觉修复计划

## 核心目标
解决暗色模式下文字、按钮因硬编码颜色导致的不可见问题，实现“玄色宣纸”风格的高对比度阅读体验。

## 详细实施步骤

### 1. 主题与颜色规范化
- 修改 `Theme.kt`: 
    - 调整 `DarkColorScheme` 中的 `primary` 颜色，确保在暗色背景下有足够的对比度（不再直接使用 0xFF1A1A1A）。
- 完善 `Color.kt`:
    - 增加专门针对暗色模式的 `BrandPrimaryDark` 变量。

### 2. 侧边栏与列表修复
- `SessionItem.kt`: 
    - 修正 `isSelected` 状态下的文字颜色逻辑，禁止在暗色模式下使用黑色。
- `SidebarContent.kt`:
    - 替换“开启新篇章”按钮的硬编码 `containerColor`。
    - 统一搜索框、页眉、页脚的文字颜色到 `MaterialTheme.colorScheme` 体系。

### 3. 输入栏与交互组件
- `ChatInputDock.kt`:
    - 修复发送按钮在禁用/启用状态下的颜色表现。
    - 优化附件菜单和预览图控制器的暗色适配。

### 4. 沉浸式对话框优化
- `ProfileDialog.kt` & `SettingsDialog.kt`:
    - 统一底部操作按钮的颜色，移除硬编码的 0xFF1A1A1A。
    - 优化输入框 (`OutlinedTextField`) 的边框和背景在深色背景下的对比度。

### 5. 内容渲染与加载
- `MessageBubbles.kt`:
    - 修复 Markdown 渲染引擎中的 `codeText` 和 `h1/h2/h3` 颜色逻辑。
    - 修正 HTML 预览按钮的背景色逻辑。
    - 优化加载进度条的颜色。

## 验证项
- [ ] 切换系统暗色模式，验证所有侧边栏文字是否清晰。
- [ ] 选中会话，验证文字是否依然可见。
- [ ] 打开设置对话框，验证保存按钮是否醒目。
- [ ] 发送 Markdown 消息，验证代码块和标题颜色。
